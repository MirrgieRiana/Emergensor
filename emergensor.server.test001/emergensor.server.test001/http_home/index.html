<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="jquery-3.2.1.min.js"></script>
<script>
	var lastModCount = -1;
	function refresh() {
		$.ajax({
			url : "/api/lines/modCount",
			success : function(data) {
				data = data * 1;
				if (lastModCount < data) {
					lastModCount = data;

					// リロード
					//$("#frame")[0].contentDocument.location.reload(true);
					window.open("/api/lines", "frame");

				}
			},
			error : function(XMLHttpRequest, textStatus, errorThrown) {

			}
		});
	}
	$(function() {
		setTimeout(refresh, 10);
		setInterval(refresh, 1000);
	});
</script>
<style>
html, body {
	height: 100%;
	margin: 0;
}

table {
	height: 100%;
	width: 100%;
	box-sizing: border-box;
	border-collapse: collapse;
}

iframe {
	height: 100%;
	width: 100%;
	box-sizing: border-box;
}
</style>
</head>

<body>
	<table>
		<tr style="height: 0%;">
			<td style="text-align: center;font-size: 150%;">Web Interface</td>
		</tr>
		<tr style="height: 100%;">
			<td><iframe id="frame" name="frame"></iframe></td>
		</tr>
	</table>
</body>
</html>
